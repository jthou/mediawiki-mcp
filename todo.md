- **总则，在执行后续任何任务之前，先完成以下操作：**
   - 当前目录下 ./test 目录是测试脚本目录
   - 每个任务都有一个测试脚本，位于 ./test 目录下。
     - 比如，任务1的测试脚本是 ./test/task1.sh
     - 测试脚本可以是任何脚本，比如 bash, python, js, cjs 等等。
   - 在执行一个新任务之前，先执行这个任务之前的所有测试脚本，只有在所有测试脚本都通过的情况下，才执行新任务。
     - 比如，在执行任务4之前，先执行 task1.sh, task2.sh, task3.sh，只有在它们都通过的情况下，才执行任务4。
   - 在新的 git 分支下执行任务，分支名称为 task1, task2, ...
   - 新任务执行结束之后，要保留新任务测试脚本。
   - 在提交代码之前，要回归测试以前的所有脚本。
- [x] 任务1：添加list_wikis工具
  -  创建基本的mcp-server，加上一个list_wikis的tool
  - 试用test_mcp_server.sh测试，能正确返回wikis列表:
     - wikipedia.org ✅ 已完成
- [x] 任务2：清理开发环境，保持干净的开发环境
   - 去掉那些尚未通过验证的工具，仅保留list_wikis这一个工具；
   - 用test_mcp_server.sh去检查，确保list_wikis能正常运行；
   - 删除不需要的文件；

- [x] 任务3：使用 nodemw 添加 get_page 工具
   - ✅ 安装并引入 nodemw
   - ✅ 在配置中添加认证字段，专注于 Jthou wiki 支持（移除 Wikipedia 支持）
   - ✅ 在 src/index.ts 中定义 MediaWikiClient 类并实现 login 和 getPage 方法
   - ✅ 在 ListToolsRequestSchema 中添加 get_page 工具定义
   - ✅ 重构代码：将处理逻辑拆分为独立函数（handleListWikis, handleGetPage）
   - ✅ 使用 switch 语句替代 if/else 链，提高代码可扩展性
   - ✅ 添加命令行参数 -f 支持，允许指定自定义 .env 文件路径
   - ✅ 集成 dotenv 支持，从环境文件加载配置
   - ✅ 修改 test_mcp_server.sh 增加 get_page 测试用例，验证 list_wikis 工具不被破坏
   - ✅ 如果获取页面成功：
     - 在当前目录下创建 .jthou_wiki 目录（专门用于 Jthou wiki 内容）
     - 以页面标题为文件名创建 .txt 文件，写入页面内容；若目录已存在，覆盖同名文件
   - ✅ 如果获取页面失败：
     - 输出详细错误提示
     - 不创建目录或文件
   - ✅ 更新 VS Code MCP 配置，支持 -f 参数
   - ✅ 完成代码重构，提高可维护性和扩展性
- [x] 任务4：试用 nodemw 添加 update_page 工具
   - ✅ 在 src/index.ts 中的 MediaWikiClient 定义 updatePage 方法
   - ✅ 修改 ListToolsRequestSchema，添加 update_page 工具定义
   - ✅ 创建 test/task4.sh 测试脚本
   - ✅ 测试：
      - ✅ 用工具 get_page 获取 test2 页面
      - ✅ 修改 test2 页面内容
      - ✅ 用 update_page 工具更新 test2 页面 (生成修订版本 96401)
      - ✅ 再次用 get_page 获取 test2 页面，验证内容已更新
   - ✅ 通过完整回归测试 (task1-4 全部通过)
